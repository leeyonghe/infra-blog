<!DOCTYPE html>
<html lang="en">

<head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link href="https://fonts.googleapis.com/css?family=Merriweather:300|Raleway:400,700" rel="stylesheet">
<link rel="stylesheet" href="/infra-blog/assets/css/style.css">
<link rel="stylesheet" href="/infra-blog/assets/css/post-detail.css">
<style>
/* Post Detail Page Styling */
.post-container article {
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  padding: 40px;
  margin: 30px auto;
  max-width: 800px;
}

@media screen and (max-width: 768px) {
  .post-container article {
    margin: 20px;
    padding: 25px;
    border-radius: 8px;
  }
}

.post-container article .post-header {
  border-bottom: 2px solid #f5f5f5;
  padding-bottom: 25px;
  margin-bottom: 30px;
}

.post-container article .post-header .post-title {
  font-size: 2.2em;
  font-weight: 700;
  color: #2c3e50;
  line-height: 1.3;
  margin-bottom: 15px;
}

@media screen and (max-width: 768px) {
  .post-container article .post-header .post-title {
    font-size: 1.8em;
  }
}

.post-container article .post-header .post-meta {
  display: flex;
  align-items: center;
  gap: 20px;
  flex-wrap: wrap;
}

.post-container article .post-header .post-meta .post-date {
  display: flex;
  align-items: center;
  color: #666;
  font-size: 0.9em;
}

.post-container article .post-header .post-meta .post-date i {
  margin-right: 8px;
  color: #888;
}

.post-container article .post-header .post-meta .post-categories-wrapper {
  display: flex;
  align-items: center;
}

.post-container article .post-header .post-meta .post-categories-wrapper i {
  margin-right: 8px;
  color: #888;
}

.post-container article .post-header .post-meta .post-categories-wrapper .post-categories {
  display: flex;
  gap: 8px;
  list-style: none;
  margin: 0;
  padding: 0;
}

.post-container article .post-header .post-meta .post-categories-wrapper .post-categories li {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 4px 12px;
  border-radius: 20px;
  font-size: 0.8em;
  font-weight: 500;
  text-transform: capitalize;
}

.post-container article .post-content {
  font-size: 1.1em;
  line-height: 1.8;
  color: #333;
}

.post-container article .post-content p {
  margin-bottom: 1.2em;
}

.post-container article .post-content h1,
.post-container article .post-content h2,
.post-container article .post-content h3,
.post-container article .post-content h4,
.post-container article .post-content h5,
.post-container article .post-content h6 {
  color: #2c3e50;
  margin: 1.5em 0 0.8em 0;
  font-weight: 600;
}

.post-container article .post-content h2 {
  font-size: 1.8em;
  border-bottom: 2px solid #3498db;
  padding-bottom: 10px;
}

.post-container article .post-content h3 {
  font-size: 1.5em;
  color: #34495e;
}

.post-container article .post-content code {
  background: #f8f9fa;
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 0.9em;
  color: #e74c3c;
}

.post-container article .post-content pre {
  background: #f8f9fa;
  border: 1px solid #e9ecef;
  border-radius: 6px;
  padding: 15px;
  overflow-x: auto;
  margin: 1.5em 0;
}

.post-container article .post-content pre code {
  background: none;
  color: #333;
  padding: 0;
}

.post-container article .post-content blockquote {
  border-left: 4px solid #3498db;
  background: #f8f9fa;
  padding: 15px 20px;
  margin: 1.5em 0;
  font-style: italic;
  color: #555;
}

.post-container article .post-content img {
  max-width: 100%;
  height: auto;
  border-radius: 8px;
  margin: 1.5em 0;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.post-container article .post-content ul,
.post-container article .post-content ol {
  padding-left: 1.5em;
  margin-bottom: 1.2em;
}

.post-container article .post-content ul li,
.post-container article .post-content ol li {
  margin-bottom: 0.5em;
}

.post-container article .post-content a {
  color: #3498db;
  text-decoration: none;
  border-bottom: 1px solid transparent;
  transition: all 0.3s ease;
}

.post-container article .post-content a:hover {
  border-bottom-color: #3498db;
}

.post-container article .post-footer {
  border-top: 2px solid #f5f5f5;
  padding-top: 25px;
  margin-top: 40px;
}

.post-container article .post-footer .post-navigation {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 20px;
}

@media screen and (max-width: 768px) {
  .post-container article .post-footer .post-navigation {
    flex-direction: column;
    gap: 15px;
  }
}

.post-container article .post-footer .post-navigation .nav-previous,
.post-container article .post-footer .post-navigation .nav-next {
  flex: 1;
}

.post-container article .post-footer .post-navigation .nav-previous a,
.post-container article .post-footer .post-navigation .nav-next a {
  display: flex;
  align-items: center;
  padding: 15px 20px;
  background: #f8f9fa;
  border-radius: 8px;
  text-decoration: none;
  color: #333;
  transition: all 0.3s ease;
  border: 2px solid transparent;
}

.post-container article .post-footer .post-navigation .nav-previous a:hover,
.post-container article .post-footer .post-navigation .nav-next a:hover {
  background: #e9ecef;
  border-color: #3498db;
  transform: translateY(-2px);
}

.post-container article .post-footer .post-navigation .nav-previous a i,
.post-container article .post-footer .post-navigation .nav-next a i {
  color: #3498db;
  margin: 0 8px;
}

.post-container article .post-footer .post-navigation .nav-previous a .nav-title,
.post-container article .post-footer .post-navigation .nav-next a .nav-title {
  font-weight: 500;
}

.post-container article .post-footer .post-navigation .nav-previous a {
  justify-content: flex-start;
}

.post-container article .post-footer .post-navigation .nav-next a {
  justify-content: flex-end;
  text-align: right;
}
</style>
<title>AWS ì™„ì „ ì •ë³µ ê°€ì´ë“œ 2í¸ - í•µì‹¬ ì„œë¹„ìŠ¤ ì‹¤ìŠµê³¼ EC2 ë§ˆìŠ¤í„° | AWS Complete Guide Part 2 - Core Services & EC2 Mastery</title>

<script type="text/javascript" src="/infra-blog/assets/js/darkmode.js"></script>

</head><body>
  <main class="container">
    <section class="about">
      <div class="about-header condensed">
      <div class="about-title">
      <a href="/infra-blog/">
        
        <img src="/infra-blog/assets/portfolio.png" alt="Infrastructure Engineer" />
        
      </a>
      <h2 id="title">
        <a href="/infra-blog/">Infrastructure Engineer</a>
      </h2>
      </div><p class="tagline">DevOps & Cloud Infrastructure Specialist</p></div>
      
      <ul class="social about-footer condensed"><a href="https://github.com/leeyonghe" target="_blank">
          <li>
            <i class="icon-github-circled"></i>
          </li>
        </a><a href="https://www.linkedin.com/in/lee-yong-hee-18912454/" target="_blank">
          <li>
            <i class="icon-linkedin-squared"></i>
          </li>
        </a><!----></ul><p class="about-footer condensed">&copy;
        2025</p><div class="about-footer condensed">
        <p>Dark Mode
          <i class="icon-moon"></i>
          <label class="switch">
            <input type="checkbox" class="dark-mode-toggle">
            <span class="slider round" onclick="toggleDarkMode()"></span>
          </label>
        </p>
      </div>
    </section>
    <section class="content">
      <style>
/* Post Detail Page Styling - Direct Inline */
.post-container article {
  background: #fff !important;
  border: none !important;
  border-top: none !important;
  border-right: none !important;
  border-bottom: none !important;
  border-left: none !important;
  border-width: 0 !important;
  border-style: none !important;
  outline: none !important;
  border-radius: 12px !important;
  box-shadow: none !important;
  padding: 40px !important;
  margin: 30px auto !important;
  max-width: 800px !important;
}

.post-container article .post-header .post-title {
  font-size: 2.2em !important;
  font-weight: 700 !important;
  color: #2c3e50 !important;
  line-height: 1.3 !important;
}

.post-container article .post-header {
  border-bottom: none !important;
  padding-bottom: 25px !important;
  margin-bottom: 30px !important;
}

.post-container article .post-content {
  font-size: 1.1em !important;
  line-height: 1.8 !important;
  color: #333 !important;
}

.post-container article .post-content h2 {
  font-size: 1.8em !important;
  border-bottom: none !important;
  padding-bottom: 10px !important;
  color: #2c3e50 !important;
}

.post-container article .post-header .post-meta .post-categories li {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
  color: white !important;
  padding: 4px 12px !important;
  border-radius: 20px !important;
  font-size: 0.8em !important;
  list-style: none !important;
  display: inline-block !important;
  margin-right: 8px !important;
}

.post-container article .post-footer {
  border-top: none !important;
  padding-top: 25px !important;
  margin-top: 40px !important;
}

/* ëª¨ë“  borderì™€ box-shadow ê°•ì œ ì œê±° */
.post-container article *,
.post-container article *::before,
.post-container article *::after {
  border: none !important;
  border-top: none !important;
  border-right: none !important;
  border-bottom: none !important;
  border-left: none !important;
  border-width: 0 !important;
  border-style: none !important;
  outline: none !important;
  box-shadow: none !important;
}

/* ì½”ë“œ ë¸”ë¡ê³¼ pre íƒœê·¸ë„ border, box-shadow ì œê±° */
.post-container article pre,
.post-container article code,
.post-container article .highlight,
.post-container article .highlighter-rouge {
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
}
</style><div class="post-container">
  <article>
    <header class="post-header">
    <h1 class="post-title">AWS ì™„ì „ ì •ë³µ ê°€ì´ë“œ 2í¸ - í•µì‹¬ ì„œë¹„ìŠ¤ ì‹¤ìŠµê³¼ EC2 ë§ˆìŠ¤í„° | AWS Complete Guide Part 2 - Core Services &amp; EC2 Mastery</h1>
    <div class="post-meta">
      <div class="post-date">
        <i class="icon-calendar"></i>
        <time datetime="2024-03-24T05:00:00+00:00">Mar 24, 2024</time>
      </div><div class="post-categories-wrapper">
        <i class="icon-tag"></i>
        <ul class="post-categories"><li>AWS</li><li>Cloud</li></ul>
      </div></div>
  </header>

  <div class="post-content">
    <p>AWSì˜ í•µì‹¬ ì„œë¹„ìŠ¤ë“¤ì„ ì‹¤ì œ ì‹¤ìŠµì„ í†µí•´ ì™„ì „íˆ ë§ˆìŠ¤í„°í•´ë³´ê² ìŠµë‹ˆë‹¤. EC2ë¶€í„° VPC, S3, RDSê¹Œì§€ ì‹¤ë¬´ì—ì„œ ë°”ë¡œ í™œìš©í•  ìˆ˜ ìˆëŠ” ëª¨ë“  ê²ƒì„ ë‹¤ë£¹ë‹ˆë‹¤.</p>

<h2 id="ec2-ì™„ì „-ë§ˆìŠ¤í„°--complete-ec2-mastery">EC2 ì™„ì „ ë§ˆìŠ¤í„° | Complete EC2 Mastery</h2>

<h3 id="ï¸-ec2-ì¸ìŠ¤í„´ìŠ¤-ìƒì„±-ë°-ê´€ë¦¬">ğŸ–¥ï¸ EC2 ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ë° ê´€ë¦¬</h3>

<h4 id="ec2-ì¸ìŠ¤í„´ìŠ¤-íƒ€ì…-ì„ íƒ-ê°€ì´ë“œ">EC2 ì¸ìŠ¤í„´ìŠ¤ íƒ€ì… ì„ íƒ ê°€ì´ë“œ</h4>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ì¸ìŠ¤í„´ìŠ¤ íŒ¨ë°€ë¦¬ë³„ íŠ¹ì§•</span>
ë²”ìš©: t3, t4g, m5, m6i
â”œâ”€â”€ t3.micro <span class="o">(</span>1 vCPU, 1GB RAM<span class="o">)</span> - í…ŒìŠ¤íŠ¸/ê°œë°œ
â”œâ”€â”€ t3.small <span class="o">(</span>2 vCPU, 2GB RAM<span class="o">)</span> - ì†Œê·œëª¨ ì›¹ì‚¬ì´íŠ¸
â”œâ”€â”€ m5.large <span class="o">(</span>2 vCPU, 8GB RAM<span class="o">)</span> - ì¼ë°˜ì ì¸ ì›Œí¬ë¡œë“œ
â””â”€â”€ m5.xlarge <span class="o">(</span>4 vCPU, 16GB RAM<span class="o">)</span> - ì¤‘ê°„ ê·œëª¨ ì• í”Œë¦¬ì¼€ì´ì…˜

ì»´í“¨íŒ… ìµœì í™”: c5, c6i
â”œâ”€â”€ c5.large <span class="o">(</span>2 vCPU, 4GB RAM<span class="o">)</span> - CPU ì§‘ì•½ì  ì‘ì—…
â””â”€â”€ c5.xlarge <span class="o">(</span>4 vCPU, 8GB RAM<span class="o">)</span> - ê³ ì„±ëŠ¥ ì›¹ ì„œë²„

ë©”ëª¨ë¦¬ ìµœì í™”: r5, r6i, x1e
â”œâ”€â”€ r5.large <span class="o">(</span>2 vCPU, 16GB RAM<span class="o">)</span> - ì¸ë©”ëª¨ë¦¬ ë°ì´í„°ë² ì´ìŠ¤
â””â”€â”€ r5.xlarge <span class="o">(</span>4 vCPU, 32GB RAM<span class="o">)</span> - ëŒ€ìš©ëŸ‰ ë©”ëª¨ë¦¬ í•„ìš” ì‘ì—…

ìŠ¤í† ë¦¬ì§€ ìµœì í™”: i3, d2, h1
â”œâ”€â”€ i3.large <span class="o">(</span>2 vCPU, 15.25GB RAM<span class="o">)</span> - NoSQL ë°ì´í„°ë² ì´ìŠ¤
â””â”€â”€ d2.xlarge <span class="o">(</span>4 vCPU, 30.5GB RAM<span class="o">)</span> - ë¹…ë°ì´í„° ì²˜ë¦¬

ê°€ì†í™”ëœ ì»´í“¨íŒ…: p3, g4, inf1
â”œâ”€â”€ p3.2xlarge <span class="o">(</span>8 vCPU, 61GB RAM, 1 GPU<span class="o">)</span> - ë¨¸ì‹ ëŸ¬ë‹
â””â”€â”€ g4dn.xlarge <span class="o">(</span>4 vCPU, 16GB RAM, 1 GPU<span class="o">)</span> - ê·¸ë˜í”½ ì›Œí¬ë¡œë“œ
</code></pre></div></div>

<h4 id="clië¥¼-í†µí•œ-ec2-ì¸ìŠ¤í„´ìŠ¤-ê´€ë¦¬">CLIë¥¼ í†µí•œ EC2 ì¸ìŠ¤í„´ìŠ¤ ê´€ë¦¬</h4>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c"># EC2 ì¸ìŠ¤í„´ìŠ¤ ê´€ë¦¬ ìŠ¤í¬ë¦½íŠ¸</span>

<span class="c"># AWS CLI ì„¤ì • í™•ì¸</span>
aws configure list

<span class="c"># ì‚¬ìš© ê°€ëŠ¥í•œ AMI ì¡°íšŒ</span>
aws ec2 describe-images <span class="se">\</span>
  <span class="nt">--owners</span> amazon <span class="se">\</span>
  <span class="nt">--filters</span> <span class="s2">"Name=name,Values=amzn2-ami-hvm-*"</span> <span class="se">\</span>
          <span class="s2">"Name=architecture,Values=x86_64"</span> <span class="se">\</span>
          <span class="s2">"Name=virtualization-type,Values=hvm"</span> <span class="se">\</span>
  <span class="nt">--query</span> <span class="s1">'Images[*].[ImageId,Name,CreationDate]'</span> <span class="se">\</span>
  <span class="nt">--output</span> table

<span class="c"># í‚¤ í˜ì–´ ìƒì„±</span>
aws ec2 create-key-pair <span class="se">\</span>
  <span class="nt">--key-name</span> MyKeyPair <span class="se">\</span>
  <span class="nt">--query</span> <span class="s1">'KeyMaterial'</span> <span class="se">\</span>
  <span class="nt">--output</span> text <span class="o">&gt;</span> MyKeyPair.pem

<span class="nb">chmod </span>400 MyKeyPair.pem

<span class="c"># ë³´ì•ˆ ê·¸ë£¹ ìƒì„±</span>
<span class="nv">SECURITY_GROUP_ID</span><span class="o">=</span><span class="si">$(</span>aws ec2 create-security-group <span class="se">\</span>
  <span class="nt">--group-name</span> WebServerSecurityGroup <span class="se">\</span>
  <span class="nt">--description</span> <span class="s2">"Security group for web server"</span> <span class="se">\</span>
  <span class="nt">--query</span> <span class="s1">'GroupId'</span> <span class="se">\</span>
  <span class="nt">--output</span> text<span class="si">)</span>

<span class="c"># SSH ì ‘ê·¼ í—ˆìš©</span>
aws ec2 authorize-security-group-ingress <span class="se">\</span>
  <span class="nt">--group-id</span> <span class="nv">$SECURITY_GROUP_ID</span> <span class="se">\</span>
  <span class="nt">--protocol</span> tcp <span class="se">\</span>
  <span class="nt">--port</span> 22 <span class="se">\</span>
  <span class="nt">--cidr</span> 0.0.0.0/0

<span class="c"># HTTP ì ‘ê·¼ í—ˆìš©</span>
aws ec2 authorize-security-group-ingress <span class="se">\</span>
  <span class="nt">--group-id</span> <span class="nv">$SECURITY_GROUP_ID</span> <span class="se">\</span>
  <span class="nt">--protocol</span> tcp <span class="se">\</span>
  <span class="nt">--port</span> 80 <span class="se">\</span>
  <span class="nt">--cidr</span> 0.0.0.0/0

<span class="c"># HTTPS ì ‘ê·¼ í—ˆìš©</span>
aws ec2 authorize-security-group-ingress <span class="se">\</span>
  <span class="nt">--group-id</span> <span class="nv">$SECURITY_GROUP_ID</span> <span class="se">\</span>
  <span class="nt">--protocol</span> tcp <span class="se">\</span>
  <span class="nt">--port</span> 443 <span class="se">\</span>
  <span class="nt">--cidr</span> 0.0.0.0/0

<span class="c"># ì‚¬ìš©ì ë°ì´í„° ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±</span>
<span class="nb">cat</span> <span class="o">&gt;</span> user-data.sh <span class="o">&lt;&lt;</span> <span class="sh">'</span><span class="no">EOF</span><span class="sh">'
#!/bin/bash
yum update -y
yum install -y httpd
systemctl start httpd
systemctl enable httpd

# ê°„ë‹¨í•œ ì›¹í˜ì´ì§€ ìƒì„±
cat &gt; /var/www/html/index.html &lt;&lt; 'HTML'
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;AWS EC2 Instance&lt;/title&gt;
    &lt;style&gt;
        body { font-family: Arial, sans-serif; margin: 40px; }
        .header { background-color: #232F3E; color: white; padding: 20px; text-align: center; }
        .content { padding: 20px; }
        .instance-info { background-color: #f0f0f0; padding: 15px; margin: 20px 0; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="header"&gt;
        &lt;h1&gt;AWS EC2 ì›¹ ì„œë²„ê°€ ì„±ê³µì ìœ¼ë¡œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤!&lt;/h1&gt;
    &lt;/div&gt;
    &lt;div class="content"&gt;
        &lt;h2&gt;ì¸ìŠ¤í„´ìŠ¤ ì •ë³´&lt;/h2&gt;
        &lt;div class="instance-info"&gt;
            &lt;p&gt;&lt;strong&gt;ì¸ìŠ¤í„´ìŠ¤ ID:&lt;/strong&gt; </span><span class="si">$(</span>curl <span class="nt">-s</span> http://169.254.169.254/latest/meta-data/instance-id<span class="si">)</span><span class="sh">&lt;/p&gt;
            &lt;p&gt;&lt;strong&gt;ê°€ìš© ì˜ì—­:&lt;/strong&gt; </span><span class="si">$(</span>curl <span class="nt">-s</span> http://169.254.169.254/latest/meta-data/placement/availability-zone<span class="si">)</span><span class="sh">&lt;/p&gt;
            &lt;p&gt;&lt;strong&gt;ì¸ìŠ¤í„´ìŠ¤ íƒ€ì…:&lt;/strong&gt; </span><span class="si">$(</span>curl <span class="nt">-s</span> http://169.254.169.254/latest/meta-data/instance-type<span class="si">)</span><span class="sh">&lt;/p&gt;
            &lt;p&gt;&lt;strong&gt;í¼ë¸”ë¦­ IP:&lt;/strong&gt; </span><span class="si">$(</span>curl <span class="nt">-s</span> http://169.254.169.254/latest/meta-data/public-ipv4<span class="si">)</span><span class="sh">&lt;/p&gt;
        &lt;/div&gt;
        &lt;h2&gt;ì„¤ì¹˜ëœ ì†Œí”„íŠ¸ì›¨ì–´&lt;/h2&gt;
        &lt;ul&gt;
            &lt;li&gt;Apache HTTP Server&lt;/li&gt;
            &lt;li&gt;Amazon Linux 2&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
HTML

# ì¸ìŠ¤í„´ìŠ¤ ì •ë³´ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì—…ë°ì´íŠ¸
cat &gt; /var/www/html/info.php &lt;&lt; 'PHP'
&lt;?php
echo "&lt;h2&gt;ì‹¤ì‹œê°„ ì‹œìŠ¤í…œ ì •ë³´&lt;/h2&gt;";
echo "&lt;p&gt;í˜„ì¬ ì‹œê°„: " . date('Y-m-d H:i:s') . "&lt;/p&gt;";
echo "&lt;p&gt;ì„œë²„ ê°€ë™ì‹œê°„: " . shell_exec('uptime') . "&lt;/p&gt;";
echo "&lt;p&gt;ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰: " . shell_exec('free -h') . "&lt;/p&gt;";
echo "&lt;p&gt;ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰: " . shell_exec('df -h') . "&lt;/p&gt;";
?&gt;
PHP

# CloudWatch ì—ì´ì „íŠ¸ ì„¤ì¹˜
yum install -y amazon-cloudwatch-agent
</span><span class="no">EOF

</span><span class="c"># EC2 ì¸ìŠ¤í„´ìŠ¤ ì‹œì‘</span>
<span class="nv">INSTANCE_ID</span><span class="o">=</span><span class="si">$(</span>aws ec2 run-instances <span class="se">\</span>
  <span class="nt">--image-id</span> ami-0abcdef1234567890 <span class="se">\</span>
  <span class="nt">--count</span> 1 <span class="se">\</span>
  <span class="nt">--instance-type</span> t3.micro <span class="se">\</span>
  <span class="nt">--key-name</span> MyKeyPair <span class="se">\</span>
  <span class="nt">--security-group-ids</span> <span class="nv">$SECURITY_GROUP_ID</span> <span class="se">\</span>
  <span class="nt">--user-data</span> file://user-data.sh <span class="se">\</span>
  <span class="nt">--tag-specifications</span> <span class="s1">'ResourceType=instance,Tags=[{Key=Name,Value=WebServer}]'</span> <span class="se">\</span>
  <span class="nt">--query</span> <span class="s1">'Instances[0].InstanceId'</span> <span class="se">\</span>
  <span class="nt">--output</span> text<span class="si">)</span>

<span class="nb">echo</span> <span class="s2">"ì¸ìŠ¤í„´ìŠ¤ </span><span class="nv">$INSTANCE_ID</span><span class="s2"> ì‹œì‘ ì¤‘..."</span>

<span class="c"># ì¸ìŠ¤í„´ìŠ¤ ìƒíƒœ ëŒ€ê¸°</span>
aws ec2 <span class="nb">wait </span>instance-running <span class="nt">--instance-ids</span> <span class="nv">$INSTANCE_ID</span>

<span class="c"># í¼ë¸”ë¦­ IP ì¡°íšŒ</span>
<span class="nv">PUBLIC_IP</span><span class="o">=</span><span class="si">$(</span>aws ec2 describe-instances <span class="se">\</span>
  <span class="nt">--instance-ids</span> <span class="nv">$INSTANCE_ID</span> <span class="se">\</span>
  <span class="nt">--query</span> <span class="s1">'Reservations[0].Instances[0].PublicIpAddress'</span> <span class="se">\</span>
  <span class="nt">--output</span> text<span class="si">)</span>

<span class="nb">echo</span> <span class="s2">"ì¸ìŠ¤í„´ìŠ¤ê°€ ì„±ê³µì ìœ¼ë¡œ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤!"</span>
<span class="nb">echo</span> <span class="s2">"í¼ë¸”ë¦­ IP: </span><span class="nv">$PUBLIC_IP</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"ì›¹ì‚¬ì´íŠ¸: http://</span><span class="nv">$PUBLIC_IP</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"SSH ì ‘ì†: ssh -i MyKeyPair.pem ec2-user@</span><span class="nv">$PUBLIC_IP</span><span class="s2">"</span>
</code></pre></div></div>

<h4 id="ec2-ê³ ê¸‰-ê´€ë¦¬-ê¸°ëŠ¥">EC2 ê³ ê¸‰ ê´€ë¦¬ ê¸°ëŠ¥</h4>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># EC2 ì¸ìŠ¤í„´ìŠ¤ ê³ ê¸‰ ê´€ë¦¬ ìŠ¤í¬ë¦½íŠ¸</span>
<span class="c">#!/bin/bash</span>

<span class="c"># ì¸ìŠ¤í„´ìŠ¤ ëª¨ë‹ˆí„°ë§ í™œì„±í™”</span>
enable_detailed_monitoring<span class="o">()</span> <span class="o">{</span>
    <span class="nb">local </span><span class="nv">instance_id</span><span class="o">=</span><span class="nv">$1</span>
    aws ec2 monitor-instances <span class="nt">--instance-ids</span> <span class="nv">$instance_id</span>
    <span class="nb">echo</span> <span class="s2">"ìƒì„¸ ëª¨ë‹ˆí„°ë§ì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤: </span><span class="nv">$instance_id</span><span class="s2">"</span>
<span class="o">}</span>

<span class="c"># EBS ë³¼ë¥¨ ìƒì„± ë° ì—°ê²°</span>
create_and_attach_volume<span class="o">()</span> <span class="o">{</span>
    <span class="nb">local </span><span class="nv">instance_id</span><span class="o">=</span><span class="nv">$1</span>
    <span class="nb">local </span><span class="nv">volume_size</span><span class="o">=</span><span class="nv">$2</span>
    <span class="nb">local </span><span class="nv">device_name</span><span class="o">=</span><span class="nv">$3</span>
    
    <span class="c"># ì¸ìŠ¤í„´ìŠ¤ì˜ ê°€ìš© ì˜ì—­ í™•ì¸</span>
    <span class="nv">AZ</span><span class="o">=</span><span class="si">$(</span>aws ec2 describe-instances <span class="se">\</span>
      <span class="nt">--instance-ids</span> <span class="nv">$instance_id</span> <span class="se">\</span>
      <span class="nt">--query</span> <span class="s1">'Reservations[0].Instances[0].Placement.AvailabilityZone'</span> <span class="se">\</span>
      <span class="nt">--output</span> text<span class="si">)</span>
    
    <span class="c"># EBS ë³¼ë¥¨ ìƒì„±</span>
    <span class="nv">VOLUME_ID</span><span class="o">=</span><span class="si">$(</span>aws ec2 create-volume <span class="se">\</span>
      <span class="nt">--size</span> <span class="nv">$volume_size</span> <span class="se">\</span>
      <span class="nt">--volume-type</span> gp3 <span class="se">\</span>
      <span class="nt">--availability-zone</span> <span class="nv">$AZ</span> <span class="se">\</span>
      <span class="nt">--tag-specifications</span> <span class="s1">'ResourceType=volume,Tags=[{Key=Name,Value=DataVolume}]'</span> <span class="se">\</span>
      <span class="nt">--query</span> <span class="s1">'VolumeId'</span> <span class="se">\</span>
      <span class="nt">--output</span> text<span class="si">)</span>
    
    <span class="c"># ë³¼ë¥¨ ìƒì„± ëŒ€ê¸°</span>
    aws ec2 <span class="nb">wait </span>volume-available <span class="nt">--volume-ids</span> <span class="nv">$VOLUME_ID</span>
    
    <span class="c"># ë³¼ë¥¨ ì—°ê²°</span>
    aws ec2 attach-volume <span class="se">\</span>
      <span class="nt">--volume-id</span> <span class="nv">$VOLUME_ID</span> <span class="se">\</span>
      <span class="nt">--instance-id</span> <span class="nv">$instance_id</span> <span class="se">\</span>
      <span class="nt">--device</span> <span class="nv">$device_name</span>
    
    <span class="nb">echo</span> <span class="s2">"ë³¼ë¥¨ </span><span class="nv">$VOLUME_ID</span><span class="s2">ê°€ </span><span class="nv">$instance_id</span><span class="s2">ì— ì—°ê²°ë˜ì—ˆìŠµë‹ˆë‹¤ (</span><span class="nv">$device_name</span><span class="s2">)"</span>
<span class="o">}</span>

<span class="c"># ìŠ¤ëƒ…ìƒ· ìƒì„±</span>
create_snapshot<span class="o">()</span> <span class="o">{</span>
    <span class="nb">local </span><span class="nv">volume_id</span><span class="o">=</span><span class="nv">$1</span>
    <span class="nb">local </span><span class="nv">description</span><span class="o">=</span><span class="nv">$2</span>
    
    <span class="nv">SNAPSHOT_ID</span><span class="o">=</span><span class="si">$(</span>aws ec2 create-snapshot <span class="se">\</span>
      <span class="nt">--volume-id</span> <span class="nv">$volume_id</span> <span class="se">\</span>
      <span class="nt">--description</span> <span class="s2">"</span><span class="nv">$description</span><span class="s2">"</span> <span class="se">\</span>
      <span class="nt">--tag-specifications</span> <span class="s1">'ResourceType=snapshot,Tags=[{Key=Name,Value=BackupSnapshot}]'</span> <span class="se">\</span>
      <span class="nt">--query</span> <span class="s1">'SnapshotId'</span> <span class="se">\</span>
      <span class="nt">--output</span> text<span class="si">)</span>
    
    <span class="nb">echo</span> <span class="s2">"ìŠ¤ëƒ…ìƒ· ìƒì„± ì¤‘: </span><span class="nv">$SNAPSHOT_ID</span><span class="s2">"</span>
    <span class="k">return</span> <span class="nv">$SNAPSHOT_ID</span>
<span class="o">}</span>

<span class="c"># AMI ìƒì„±</span>
create_ami<span class="o">()</span> <span class="o">{</span>
    <span class="nb">local </span><span class="nv">instance_id</span><span class="o">=</span><span class="nv">$1</span>
    <span class="nb">local </span><span class="nv">ami_name</span><span class="o">=</span><span class="nv">$2</span>
    <span class="nb">local </span><span class="nv">description</span><span class="o">=</span><span class="nv">$3</span>
    
    <span class="nv">AMI_ID</span><span class="o">=</span><span class="si">$(</span>aws ec2 create-image <span class="se">\</span>
      <span class="nt">--instance-id</span> <span class="nv">$instance_id</span> <span class="se">\</span>
      <span class="nt">--name</span> <span class="s2">"</span><span class="nv">$ami_name</span><span class="s2">"</span> <span class="se">\</span>
      <span class="nt">--description</span> <span class="s2">"</span><span class="nv">$description</span><span class="s2">"</span> <span class="se">\</span>
      <span class="nt">--no-reboot</span> <span class="se">\</span>
      <span class="nt">--query</span> <span class="s1">'ImageId'</span> <span class="se">\</span>
      <span class="nt">--output</span> text<span class="si">)</span>
    
    <span class="nb">echo</span> <span class="s2">"AMI ìƒì„± ì¤‘: </span><span class="nv">$AMI_ID</span><span class="s2">"</span>
    <span class="k">return</span> <span class="nv">$AMI_ID</span>
<span class="o">}</span>

<span class="c"># ì¸ìŠ¤í„´ìŠ¤ í¬ê¸° ì¡°ì •</span>
resize_instance<span class="o">()</span> <span class="o">{</span>
    <span class="nb">local </span><span class="nv">instance_id</span><span class="o">=</span><span class="nv">$1</span>
    <span class="nb">local </span><span class="nv">new_instance_type</span><span class="o">=</span><span class="nv">$2</span>
    
    <span class="nb">echo</span> <span class="s2">"ì¸ìŠ¤í„´ìŠ¤ ì¤‘ì§€ ì¤‘..."</span>
    aws ec2 stop-instances <span class="nt">--instance-ids</span> <span class="nv">$instance_id</span>
    aws ec2 <span class="nb">wait </span>instance-stopped <span class="nt">--instance-ids</span> <span class="nv">$instance_id</span>
    
    <span class="nb">echo</span> <span class="s2">"ì¸ìŠ¤í„´ìŠ¤ íƒ€ì… ë³€ê²½ ì¤‘..."</span>
    aws ec2 modify-instance-attribute <span class="se">\</span>
      <span class="nt">--instance-id</span> <span class="nv">$instance_id</span> <span class="se">\</span>
      <span class="nt">--instance-type</span> <span class="nv">Value</span><span class="o">=</span><span class="nv">$new_instance_type</span>
    
    <span class="nb">echo</span> <span class="s2">"ì¸ìŠ¤í„´ìŠ¤ ì‹œì‘ ì¤‘..."</span>
    aws ec2 start-instances <span class="nt">--instance-ids</span> <span class="nv">$instance_id</span>
    aws ec2 <span class="nb">wait </span>instance-running <span class="nt">--instance-ids</span> <span class="nv">$instance_id</span>
    
    <span class="nb">echo</span> <span class="s2">"ì¸ìŠ¤í„´ìŠ¤ í¬ê¸° ì¡°ì • ì™„ë£Œ: </span><span class="nv">$new_instance_type</span><span class="s2">"</span>
<span class="o">}</span>

<span class="c"># ì‚¬ìš© ì˜ˆì‹œ</span>
<span class="c"># enable_detailed_monitoring "i-1234567890abcdef0"</span>
<span class="c"># create_and_attach_volume "i-1234567890abcdef0" 20 "/dev/sdf"</span>
<span class="c"># create_snapshot "vol-1234567890abcdef0" "Daily backup"</span>
<span class="c"># create_ami "i-1234567890abcdef0" "WebServer-v1.0" "Production web server AMI"</span>
<span class="c"># resize_instance "i-1234567890abcdef0" "t3.small"</span>
</code></pre></div></div>

<h2 id="vpc-ë„¤íŠ¸ì›Œí‚¹-ì‹¬í™”--advanced-vpc-networking">VPC ë„¤íŠ¸ì›Œí‚¹ ì‹¬í™” | Advanced VPC Networking</h2>

<h3 id="-vpc-ì„¤ê³„-ë°-êµ¬ì¶•">ğŸŒ VPC ì„¤ê³„ ë° êµ¬ì¶•</h3>

<h4 id="ì™„ì „í•œ-vpc-ì¸í”„ë¼-êµ¬ì¶•">ì™„ì „í•œ VPC ì¸í”„ë¼ êµ¬ì¶•</h4>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c"># í”„ë¡œë•ì…˜ ë ˆë²¨ VPC ì¸í”„ë¼ êµ¬ì¶• ìŠ¤í¬ë¦½íŠ¸</span>

<span class="c"># ë³€ìˆ˜ ì„¤ì •</span>
<span class="nv">VPC_CIDR</span><span class="o">=</span><span class="s2">"10.0.0.0/16"</span>
<span class="nv">PUBLIC_SUBNET_1_CIDR</span><span class="o">=</span><span class="s2">"10.0.1.0/24"</span>
<span class="nv">PUBLIC_SUBNET_2_CIDR</span><span class="o">=</span><span class="s2">"10.0.2.0/24"</span>
<span class="nv">PRIVATE_SUBNET_1_CIDR</span><span class="o">=</span><span class="s2">"10.0.10.0/24"</span>
<span class="nv">PRIVATE_SUBNET_2_CIDR</span><span class="o">=</span><span class="s2">"10.0.20.0/24"</span>
<span class="nv">DB_SUBNET_1_CIDR</span><span class="o">=</span><span class="s2">"10.0.100.0/24"</span>
<span class="nv">DB_SUBNET_2_CIDR</span><span class="o">=</span><span class="s2">"10.0.200.0/24"</span>

<span class="c"># ê°€ìš© ì˜ì—­ ì¡°íšŒ</span>
<span class="nv">AZ1</span><span class="o">=</span><span class="si">$(</span>aws ec2 describe-availability-zones <span class="nt">--query</span> <span class="s1">'AvailabilityZones[0].ZoneName'</span> <span class="nt">--output</span> text<span class="si">)</span>
<span class="nv">AZ2</span><span class="o">=</span><span class="si">$(</span>aws ec2 describe-availability-zones <span class="nt">--query</span> <span class="s1">'AvailabilityZones[1].ZoneName'</span> <span class="nt">--output</span> text<span class="si">)</span>

<span class="nb">echo</span> <span class="s2">"ê°€ìš© ì˜ì—­: </span><span class="nv">$AZ1</span><span class="s2">, </span><span class="nv">$AZ2</span><span class="s2">"</span>

<span class="c"># 1. VPC ìƒì„±</span>
<span class="nv">VPC_ID</span><span class="o">=</span><span class="si">$(</span>aws ec2 create-vpc <span class="se">\</span>
  <span class="nt">--cidr-block</span> <span class="nv">$VPC_CIDR</span> <span class="se">\</span>
  <span class="nt">--tag-specifications</span> <span class="s1">'ResourceType=vpc,Tags=[{Key=Name,Value=Production-VPC}]'</span> <span class="se">\</span>
  <span class="nt">--query</span> <span class="s1">'Vpc.VpcId'</span> <span class="se">\</span>
  <span class="nt">--output</span> text<span class="si">)</span>

<span class="nb">echo</span> <span class="s2">"VPC ìƒì„±ë¨: </span><span class="nv">$VPC_ID</span><span class="s2">"</span>

<span class="c"># DNS í˜¸ìŠ¤íŠ¸ëª… í™œì„±í™”</span>
aws ec2 modify-vpc-attribute <span class="nt">--vpc-id</span> <span class="nv">$VPC_ID</span> <span class="nt">--enable-dns-hostnames</span>
aws ec2 modify-vpc-attribute <span class="nt">--vpc-id</span> <span class="nv">$VPC_ID</span> <span class="nt">--enable-dns-support</span>

<span class="c"># 2. ì¸í„°ë„· ê²Œì´íŠ¸ì›¨ì´ ìƒì„± ë° ì—°ê²°</span>
<span class="nv">IGW_ID</span><span class="o">=</span><span class="si">$(</span>aws ec2 create-internet-gateway <span class="se">\</span>
  <span class="nt">--tag-specifications</span> <span class="s1">'ResourceType=internet-gateway,Tags=[{Key=Name,Value=Production-IGW}]'</span> <span class="se">\</span>
  <span class="nt">--query</span> <span class="s1">'InternetGateway.InternetGatewayId'</span> <span class="se">\</span>
  <span class="nt">--output</span> text<span class="si">)</span>

aws ec2 attach-internet-gateway <span class="nt">--vpc-id</span> <span class="nv">$VPC_ID</span> <span class="nt">--internet-gateway-id</span> <span class="nv">$IGW_ID</span>
<span class="nb">echo</span> <span class="s2">"ì¸í„°ë„· ê²Œì´íŠ¸ì›¨ì´ ìƒì„± ë° ì—°ê²°ë¨: </span><span class="nv">$IGW_ID</span><span class="s2">"</span>

<span class="c"># 3. í¼ë¸”ë¦­ ì„œë¸Œë„· ìƒì„±</span>
<span class="nv">PUBLIC_SUBNET_1_ID</span><span class="o">=</span><span class="si">$(</span>aws ec2 create-subnet <span class="se">\</span>
  <span class="nt">--vpc-id</span> <span class="nv">$VPC_ID</span> <span class="se">\</span>
  <span class="nt">--cidr-block</span> <span class="nv">$PUBLIC_SUBNET_1_CIDR</span> <span class="se">\</span>
  <span class="nt">--availability-zone</span> <span class="nv">$AZ1</span> <span class="se">\</span>
  <span class="nt">--tag-specifications</span> <span class="s1">'ResourceType=subnet,Tags=[{Key=Name,Value=Public-Subnet-1}]'</span> <span class="se">\</span>
  <span class="nt">--query</span> <span class="s1">'Subnet.SubnetId'</span> <span class="se">\</span>
  <span class="nt">--output</span> text<span class="si">)</span>

<span class="nv">PUBLIC_SUBNET_2_ID</span><span class="o">=</span><span class="si">$(</span>aws ec2 create-subnet <span class="se">\</span>
  <span class="nt">--vpc-id</span> <span class="nv">$VPC_ID</span> <span class="se">\</span>
  <span class="nt">--cidr-block</span> <span class="nv">$PUBLIC_SUBNET_2_CIDR</span> <span class="se">\</span>
  <span class="nt">--availability-zone</span> <span class="nv">$AZ2</span> <span class="se">\</span>
  <span class="nt">--tag-specifications</span> <span class="s1">'ResourceType=subnet,Tags=[{Key=Name,Value=Public-Subnet-2}]'</span> <span class="se">\</span>
  <span class="nt">--query</span> <span class="s1">'Subnet.SubnetId'</span> <span class="se">\</span>
  <span class="nt">--output</span> text<span class="si">)</span>

<span class="c"># í¼ë¸”ë¦­ IP ìë™ í• ë‹¹ í™œì„±í™”</span>
aws ec2 modify-subnet-attribute <span class="nt">--subnet-id</span> <span class="nv">$PUBLIC_SUBNET_1_ID</span> <span class="nt">--map-public-ip-on-launch</span>
aws ec2 modify-subnet-attribute <span class="nt">--subnet-id</span> <span class="nv">$PUBLIC_SUBNET_2_ID</span> <span class="nt">--map-public-ip-on-launch</span>

<span class="nb">echo</span> <span class="s2">"í¼ë¸”ë¦­ ì„œë¸Œë„· ìƒì„±ë¨: </span><span class="nv">$PUBLIC_SUBNET_1_ID</span><span class="s2">, </span><span class="nv">$PUBLIC_SUBNET_2_ID</span><span class="s2">"</span>

<span class="c"># 4. í”„ë¼ì´ë¹— ì„œë¸Œë„· ìƒì„±</span>
<span class="nv">PRIVATE_SUBNET_1_ID</span><span class="o">=</span><span class="si">$(</span>aws ec2 create-subnet <span class="se">\</span>
  <span class="nt">--vpc-id</span> <span class="nv">$VPC_ID</span> <span class="se">\</span>
  <span class="nt">--cidr-block</span> <span class="nv">$PRIVATE_SUBNET_1_CIDR</span> <span class="se">\</span>
  <span class="nt">--availability-zone</span> <span class="nv">$AZ1</span> <span class="se">\</span>
  <span class="nt">--tag-specifications</span> <span class="s1">'ResourceType=subnet,Tags=[{Key=Name,Value=Private-Subnet-1}]'</span> <span class="se">\</span>
  <span class="nt">--query</span> <span class="s1">'Subnet.SubnetId'</span> <span class="se">\</span>
  <span class="nt">--output</span> text<span class="si">)</span>

<span class="nv">PRIVATE_SUBNET_2_ID</span><span class="o">=</span><span class="si">$(</span>aws ec2 create-subnet <span class="se">\</span>
  <span class="nt">--vpc-id</span> <span class="nv">$VPC_ID</span> <span class="se">\</span>
  <span class="nt">--cidr-block</span> <span class="nv">$PRIVATE_SUBNET_2_CIDR</span> <span class="se">\</span>
  <span class="nt">--availability-zone</span> <span class="nv">$AZ2</span> <span class="se">\</span>
  <span class="nt">--tag-specifications</span> <span class="s1">'ResourceType=subnet,Tags=[{Key=Name,Value=Private-Subnet-2}]'</span> <span class="se">\</span>
  <span class="nt">--query</span> <span class="s1">'Subnet.SubnetId'</span> <span class="se">\</span>
  <span class="nt">--output</span> text<span class="si">)</span>

<span class="nb">echo</span> <span class="s2">"í”„ë¼ì´ë¹— ì„œë¸Œë„· ìƒì„±ë¨: </span><span class="nv">$PRIVATE_SUBNET_1_ID</span><span class="s2">, </span><span class="nv">$PRIVATE_SUBNET_2_ID</span><span class="s2">"</span>

<span class="c"># 5. ë°ì´í„°ë² ì´ìŠ¤ ì„œë¸Œë„· ìƒì„±</span>
<span class="nv">DB_SUBNET_1_ID</span><span class="o">=</span><span class="si">$(</span>aws ec2 create-subnet <span class="se">\</span>
  <span class="nt">--vpc-id</span> <span class="nv">$VPC_ID</span> <span class="se">\</span>
  <span class="nt">--cidr-block</span> <span class="nv">$DB_SUBNET_1_CIDR</span> <span class="se">\</span>
  <span class="nt">--availability-zone</span> <span class="nv">$AZ1</span> <span class="se">\</span>
  <span class="nt">--tag-specifications</span> <span class="s1">'ResourceType=subnet,Tags=[{Key=Name,Value=DB-Subnet-1}]'</span> <span class="se">\</span>
  <span class="nt">--query</span> <span class="s1">'Subnet.SubnetId'</span> <span class="se">\</span>
  <span class="nt">--output</span> text<span class="si">)</span>

<span class="nv">DB_SUBNET_2_ID</span><span class="o">=</span><span class="si">$(</span>aws ec2 create-subnet <span class="se">\</span>
  <span class="nt">--vpc-id</span> <span class="nv">$VPC_ID</span> <span class="se">\</span>
  <span class="nt">--cidr-block</span> <span class="nv">$DB_SUBNET_2_CIDR</span> <span class="se">\</span>
  <span class="nt">--availability-zone</span> <span class="nv">$AZ2</span> <span class="se">\</span>
  <span class="nt">--tag-specifications</span> <span class="s1">'ResourceType=subnet,Tags=[{Key=Name,Value=DB-Subnet-2}]'</span> <span class="se">\</span>
  <span class="nt">--query</span> <span class="s1">'Subnet.SubnetId'</span> <span class="se">\</span>
  <span class="nt">--output</span> text<span class="si">)</span>

<span class="nb">echo</span> <span class="s2">"ë°ì´í„°ë² ì´ìŠ¤ ì„œë¸Œë„· ìƒì„±ë¨: </span><span class="nv">$DB_SUBNET_1_ID</span><span class="s2">, </span><span class="nv">$DB_SUBNET_2_ID</span><span class="s2">"</span>

<span class="c"># 6. NAT ê²Œì´íŠ¸ì›¨ì´ìš© Elastic IP í• ë‹¹</span>
<span class="nv">EIP_1_ID</span><span class="o">=</span><span class="si">$(</span>aws ec2 allocate-address <span class="se">\</span>
  <span class="nt">--domain</span> vpc <span class="se">\</span>
  <span class="nt">--tag-specifications</span> <span class="s1">'ResourceType=elastic-ip,Tags=[{Key=Name,Value=NAT-Gateway-1-EIP}]'</span> <span class="se">\</span>
  <span class="nt">--query</span> <span class="s1">'AllocationId'</span> <span class="se">\</span>
  <span class="nt">--output</span> text<span class="si">)</span>

<span class="nv">EIP_2_ID</span><span class="o">=</span><span class="si">$(</span>aws ec2 allocate-address <span class="se">\</span>
  <span class="nt">--domain</span> vpc <span class="se">\</span>
  <span class="nt">--tag-specifications</span> <span class="s1">'ResourceType=elastic-ip,Tags=[{Key=Name,Value=NAT-Gateway-2-EIP}]'</span> <span class="se">\</span>
  <span class="nt">--query</span> <span class="s1">'AllocationId'</span> <span class="se">\</span>
  <span class="nt">--output</span> text<span class="si">)</span>

<span class="nb">echo</span> <span class="s2">"Elastic IP í• ë‹¹ë¨: </span><span class="nv">$EIP_1_ID</span><span class="s2">, </span><span class="nv">$EIP_2_ID</span><span class="s2">"</span>

<span class="c"># 7. NAT ê²Œì´íŠ¸ì›¨ì´ ìƒì„±</span>
<span class="nv">NAT_GW_1_ID</span><span class="o">=</span><span class="si">$(</span>aws ec2 create-nat-gateway <span class="se">\</span>
  <span class="nt">--subnet-id</span> <span class="nv">$PUBLIC_SUBNET_1_ID</span> <span class="se">\</span>
  <span class="nt">--allocation-id</span> <span class="nv">$EIP_1_ID</span> <span class="se">\</span>
  <span class="nt">--tag-specifications</span> <span class="s1">'ResourceType=nat-gateway,Tags=[{Key=Name,Value=NAT-Gateway-1}]'</span> <span class="se">\</span>
  <span class="nt">--query</span> <span class="s1">'NatGateway.NatGatewayId'</span> <span class="se">\</span>
  <span class="nt">--output</span> text<span class="si">)</span>

<span class="nv">NAT_GW_2_ID</span><span class="o">=</span><span class="si">$(</span>aws ec2 create-nat-gateway <span class="se">\</span>
  <span class="nt">--subnet-id</span> <span class="nv">$PUBLIC_SUBNET_2_ID</span> <span class="se">\</span>
  <span class="nt">--allocation-id</span> <span class="nv">$EIP_2_ID</span> <span class="se">\</span>
  <span class="nt">--tag-specifications</span> <span class="s1">'ResourceType=nat-gateway,Tags=[{Key=Name,Value=NAT-Gateway-2}]'</span> <span class="se">\</span>
  <span class="nt">--query</span> <span class="s1">'NatGateway.NatGatewayId'</span> <span class="se">\</span>
  <span class="nt">--output</span> text<span class="si">)</span>

<span class="nb">echo</span> <span class="s2">"NAT ê²Œì´íŠ¸ì›¨ì´ ìƒì„± ì¤‘: </span><span class="nv">$NAT_GW_1_ID</span><span class="s2">, </span><span class="nv">$NAT_GW_2_ID</span><span class="s2">"</span>

<span class="c"># NAT ê²Œì´íŠ¸ì›¨ì´ ì‚¬ìš© ê°€ëŠ¥ ëŒ€ê¸°</span>
aws ec2 <span class="nb">wait </span>nat-gateway-available <span class="nt">--nat-gateway-ids</span> <span class="nv">$NAT_GW_1_ID</span> <span class="nv">$NAT_GW_2_ID</span>

<span class="c"># 8. ë¼ìš°íŒ… í…Œì´ë¸” ìƒì„± ë° ì„¤ì •</span>

<span class="c"># í¼ë¸”ë¦­ ë¼ìš°íŒ… í…Œì´ë¸”</span>
<span class="nv">PUBLIC_RT_ID</span><span class="o">=</span><span class="si">$(</span>aws ec2 create-route-table <span class="se">\</span>
  <span class="nt">--vpc-id</span> <span class="nv">$VPC_ID</span> <span class="se">\</span>
  <span class="nt">--tag-specifications</span> <span class="s1">'ResourceType=route-table,Tags=[{Key=Name,Value=Public-Route-Table}]'</span> <span class="se">\</span>
  <span class="nt">--query</span> <span class="s1">'RouteTable.RouteTableId'</span> <span class="se">\</span>
  <span class="nt">--output</span> text<span class="si">)</span>

<span class="c"># ì¸í„°ë„· ê²Œì´íŠ¸ì›¨ì´ë¡œì˜ ë¼ìš°íŠ¸ ì¶”ê°€</span>
aws ec2 create-route <span class="se">\</span>
  <span class="nt">--route-table-id</span> <span class="nv">$PUBLIC_RT_ID</span> <span class="se">\</span>
  <span class="nt">--destination-cidr-block</span> 0.0.0.0/0 <span class="se">\</span>
  <span class="nt">--gateway-id</span> <span class="nv">$IGW_ID</span>

<span class="c"># í¼ë¸”ë¦­ ì„œë¸Œë„·ê³¼ ì—°ê²°</span>
aws ec2 associate-route-table <span class="nt">--subnet-id</span> <span class="nv">$PUBLIC_SUBNET_1_ID</span> <span class="nt">--route-table-id</span> <span class="nv">$PUBLIC_RT_ID</span>
aws ec2 associate-route-table <span class="nt">--subnet-id</span> <span class="nv">$PUBLIC_SUBNET_2_ID</span> <span class="nt">--route-table-id</span> <span class="nv">$PUBLIC_RT_ID</span>

<span class="nb">echo</span> <span class="s2">"í¼ë¸”ë¦­ ë¼ìš°íŒ… í…Œì´ë¸” ì„¤ì • ì™„ë£Œ: </span><span class="nv">$PUBLIC_RT_ID</span><span class="s2">"</span>

<span class="c"># í”„ë¼ì´ë¹— ë¼ìš°íŒ… í…Œì´ë¸” 1</span>
<span class="nv">PRIVATE_RT_1_ID</span><span class="o">=</span><span class="si">$(</span>aws ec2 create-route-table <span class="se">\</span>
  <span class="nt">--vpc-id</span> <span class="nv">$VPC_ID</span> <span class="se">\</span>
  <span class="nt">--tag-specifications</span> <span class="s1">'ResourceType=route-table,Tags=[{Key=Name,Value=Private-Route-Table-1}]'</span> <span class="se">\</span>
  <span class="nt">--query</span> <span class="s1">'RouteTable.RouteTableId'</span> <span class="se">\</span>
  <span class="nt">--output</span> text<span class="si">)</span>

aws ec2 create-route <span class="se">\</span>
  <span class="nt">--route-table-id</span> <span class="nv">$PRIVATE_RT_1_ID</span> <span class="se">\</span>
  <span class="nt">--destination-cidr-block</span> 0.0.0.0/0 <span class="se">\</span>
  <span class="nt">--nat-gateway-id</span> <span class="nv">$NAT_GW_1_ID</span>

aws ec2 associate-route-table <span class="nt">--subnet-id</span> <span class="nv">$PRIVATE_SUBNET_1_ID</span> <span class="nt">--route-table-id</span> <span class="nv">$PRIVATE_RT_1_ID</span>

<span class="c"># í”„ë¼ì´ë¹— ë¼ìš°íŒ… í…Œì´ë¸” 2</span>
<span class="nv">PRIVATE_RT_2_ID</span><span class="o">=</span><span class="si">$(</span>aws ec2 create-route-table <span class="se">\</span>
  <span class="nt">--vpc-id</span> <span class="nv">$VPC_ID</span> <span class="se">\</span>
  <span class="nt">--tag-specifications</span> <span class="s1">'ResourceType=route-table,Tags=[{Key=Name,Value=Private-Route-Table-2}]'</span> <span class="se">\</span>
  <span class="nt">--query</span> <span class="s1">'RouteTable.RouteTableId'</span> <span class="se">\</span>
  <span class="nt">--output</span> text<span class="si">)</span>

aws ec2 create-route <span class="se">\</span>
  <span class="nt">--route-table-id</span> <span class="nv">$PRIVATE_RT_2_ID</span> <span class="se">\</span>
  <span class="nt">--destination-cidr-block</span> 0.0.0.0/0 <span class="se">\</span>
  <span class="nt">--nat-gateway-id</span> <span class="nv">$NAT_GW_2_ID</span>

aws ec2 associate-route-table <span class="nt">--subnet-id</span> <span class="nv">$PRIVATE_SUBNET_2_ID</span> <span class="nt">--route-table-id</span> <span class="nv">$PRIVATE_RT_2_ID</span>

<span class="nb">echo</span> <span class="s2">"í”„ë¼ì´ë¹— ë¼ìš°íŒ… í…Œì´ë¸” ì„¤ì • ì™„ë£Œ: </span><span class="nv">$PRIVATE_RT_1_ID</span><span class="s2">, </span><span class="nv">$PRIVATE_RT_2_ID</span><span class="s2">"</span>

<span class="c"># ë°ì´í„°ë² ì´ìŠ¤ ë¼ìš°íŒ… í…Œì´ë¸”</span>
<span class="nv">DB_RT_ID</span><span class="o">=</span><span class="si">$(</span>aws ec2 create-route-table <span class="se">\</span>
  <span class="nt">--vpc-id</span> <span class="nv">$VPC_ID</span> <span class="se">\</span>
  <span class="nt">--tag-specifications</span> <span class="s1">'ResourceType=route-table,Tags=[{Key=Name,Value=DB-Route-Table}]'</span> <span class="se">\</span>
  <span class="nt">--query</span> <span class="s1">'RouteTable.RouteTableId'</span> <span class="se">\</span>
  <span class="nt">--output</span> text<span class="si">)</span>

aws ec2 associate-route-table <span class="nt">--subnet-id</span> <span class="nv">$DB_SUBNET_1_ID</span> <span class="nt">--route-table-id</span> <span class="nv">$DB_RT_ID</span>
aws ec2 associate-route-table <span class="nt">--subnet-id</span> <span class="nv">$DB_SUBNET_2_ID</span> <span class="nt">--route-table-id</span> <span class="nv">$DB_RT_ID</span>

<span class="nb">echo</span> <span class="s2">"ë°ì´í„°ë² ì´ìŠ¤ ë¼ìš°íŒ… í…Œì´ë¸” ì„¤ì • ì™„ë£Œ: </span><span class="nv">$DB_RT_ID</span><span class="s2">"</span>

<span class="c"># 9. ë³´ì•ˆ ê·¸ë£¹ ìƒì„±</span>

<span class="c"># ì›¹ ì„œë²„ ë³´ì•ˆ ê·¸ë£¹</span>
<span class="nv">WEB_SG_ID</span><span class="o">=</span><span class="si">$(</span>aws ec2 create-security-group <span class="se">\</span>
  <span class="nt">--group-name</span> WebServer-SG <span class="se">\</span>
  <span class="nt">--description</span> <span class="s2">"Security group for web servers"</span> <span class="se">\</span>
  <span class="nt">--vpc-id</span> <span class="nv">$VPC_ID</span> <span class="se">\</span>
  <span class="nt">--tag-specifications</span> <span class="s1">'ResourceType=security-group,Tags=[{Key=Name,Value=WebServer-SG}]'</span> <span class="se">\</span>
  <span class="nt">--query</span> <span class="s1">'GroupId'</span> <span class="se">\</span>
  <span class="nt">--output</span> text<span class="si">)</span>

aws ec2 authorize-security-group-ingress <span class="nt">--group-id</span> <span class="nv">$WEB_SG_ID</span> <span class="nt">--protocol</span> tcp <span class="nt">--port</span> 80 <span class="nt">--cidr</span> 0.0.0.0/0
aws ec2 authorize-security-group-ingress <span class="nt">--group-id</span> <span class="nv">$WEB_SG_ID</span> <span class="nt">--protocol</span> tcp <span class="nt">--port</span> 443 <span class="nt">--cidr</span> 0.0.0.0/0
aws ec2 authorize-security-group-ingress <span class="nt">--group-id</span> <span class="nv">$WEB_SG_ID</span> <span class="nt">--protocol</span> tcp <span class="nt">--port</span> 22 <span class="nt">--source-group</span> <span class="nv">$BASTION_SG_ID</span>

<span class="c"># ë² ìŠ¤ì²œ í˜¸ìŠ¤íŠ¸ ë³´ì•ˆ ê·¸ë£¹</span>
<span class="nv">BASTION_SG_ID</span><span class="o">=</span><span class="si">$(</span>aws ec2 create-security-group <span class="se">\</span>
  <span class="nt">--group-name</span> Bastion-SG <span class="se">\</span>
  <span class="nt">--description</span> <span class="s2">"Security group for bastion hosts"</span> <span class="se">\</span>
  <span class="nt">--vpc-id</span> <span class="nv">$VPC_ID</span> <span class="se">\</span>
  <span class="nt">--tag-specifications</span> <span class="s1">'ResourceType=security-group,Tags=[{Key=Name,Value=Bastion-SG}]'</span> <span class="se">\</span>
  <span class="nt">--query</span> <span class="s1">'GroupId'</span> <span class="se">\</span>
  <span class="nt">--output</span> text<span class="si">)</span>

aws ec2 authorize-security-group-ingress <span class="nt">--group-id</span> <span class="nv">$BASTION_SG_ID</span> <span class="nt">--protocol</span> tcp <span class="nt">--port</span> 22 <span class="nt">--cidr</span> 0.0.0.0/0

<span class="c"># ë°ì´í„°ë² ì´ìŠ¤ ë³´ì•ˆ ê·¸ë£¹</span>
<span class="nv">DB_SG_ID</span><span class="o">=</span><span class="si">$(</span>aws ec2 create-security-group <span class="se">\</span>
  <span class="nt">--group-name</span> Database-SG <span class="se">\</span>
  <span class="nt">--description</span> <span class="s2">"Security group for databases"</span> <span class="se">\</span>
  <span class="nt">--vpc-id</span> <span class="nv">$VPC_ID</span> <span class="se">\</span>
  <span class="nt">--tag-specifications</span> <span class="s1">'ResourceType=security-group,Tags=[{Key=Name,Value=Database-SG}]'</span> <span class="se">\</span>
  <span class="nt">--query</span> <span class="s1">'GroupId'</span> <span class="se">\</span>
  <span class="nt">--output</span> text<span class="si">)</span>

aws ec2 authorize-security-group-ingress <span class="nt">--group-id</span> <span class="nv">$DB_SG_ID</span> <span class="nt">--protocol</span> tcp <span class="nt">--port</span> 3306 <span class="nt">--source-group</span> <span class="nv">$WEB_SG_ID</span>

<span class="nb">echo</span> <span class="s2">"ë³´ì•ˆ ê·¸ë£¹ ìƒì„± ì™„ë£Œ: Web=</span><span class="nv">$WEB_SG_ID</span><span class="s2">, Bastion=</span><span class="nv">$BASTION_SG_ID</span><span class="s2">, DB=</span><span class="nv">$DB_SG_ID</span><span class="s2">"</span>

<span class="c"># 10. VPC í”Œë¡œìš° ë¡œê·¸ í™œì„±í™”</span>
aws ec2 create-flow-logs <span class="se">\</span>
  <span class="nt">--resource-type</span> VPC <span class="se">\</span>
  <span class="nt">--resource-ids</span> <span class="nv">$VPC_ID</span> <span class="se">\</span>
  <span class="nt">--traffic-type</span> ALL <span class="se">\</span>
  <span class="nt">--log-destination-type</span> cloud-watch-logs <span class="se">\</span>
  <span class="nt">--log-group-name</span> VPCFlowLogs <span class="se">\</span>
  <span class="nt">--deliver-logs-permission-arn</span> arn:aws:iam::123456789012:role/flowlogsRole

<span class="nb">echo</span> <span class="s2">"=== VPC ì¸í”„ë¼ êµ¬ì¶• ì™„ë£Œ ==="</span>
<span class="nb">echo</span> <span class="s2">"VPC ID: </span><span class="nv">$VPC_ID</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"í¼ë¸”ë¦­ ì„œë¸Œë„·: </span><span class="nv">$PUBLIC_SUBNET_1_ID</span><span class="s2">, </span><span class="nv">$PUBLIC_SUBNET_2_ID</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"í”„ë¼ì´ë¹— ì„œë¸Œë„·: </span><span class="nv">$PRIVATE_SUBNET_1_ID</span><span class="s2">, </span><span class="nv">$PRIVATE_SUBNET_2_ID</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"ë°ì´í„°ë² ì´ìŠ¤ ì„œë¸Œë„·: </span><span class="nv">$DB_SUBNET_1_ID</span><span class="s2">, </span><span class="nv">$DB_SUBNET_2_ID</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"NAT ê²Œì´íŠ¸ì›¨ì´: </span><span class="nv">$NAT_GW_1_ID</span><span class="s2">, </span><span class="nv">$NAT_GW_2_ID</span><span class="s2">"</span>
</code></pre></div></div>

<h2 id="s3-ìŠ¤í† ë¦¬ì§€-ì™„ì „-í™œìš©--complete-s3-storage-utilization">S3 ìŠ¤í† ë¦¬ì§€ ì™„ì „ í™œìš© | Complete S3 Storage Utilization</h2>

<h3 id="ï¸-s3-ê³ ê¸‰-í™œìš©-ë°-ê´€ë¦¬">ğŸ—„ï¸ S3 ê³ ê¸‰ í™œìš© ë° ê´€ë¦¬</h3>

<h4 id="s3-ë²„í‚·-ìƒì„±-ë°-ì •ì±…-ì„¤ì •">S3 ë²„í‚· ìƒì„± ë° ì •ì±… ì„¤ì •</h4>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c"># S3 ì¢…í•© ê´€ë¦¬ ìŠ¤í¬ë¦½íŠ¸</span>

<span class="nv">BUCKET_NAME</span><span class="o">=</span><span class="s2">"my-production-bucket-</span><span class="si">$(</span><span class="nb">date</span> +%s<span class="si">)</span><span class="s2">"</span>
<span class="nv">REGION</span><span class="o">=</span><span class="s2">"us-east-1"</span>

<span class="c"># S3 ë²„í‚· ìƒì„±</span>
create_s3_bucket<span class="o">()</span> <span class="o">{</span>
    <span class="nb">echo</span> <span class="s2">"S3 ë²„í‚· ìƒì„± ì¤‘: </span><span class="nv">$BUCKET_NAME</span><span class="s2">"</span>
    
    <span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$REGION</span><span class="s2">"</span> <span class="o">!=</span> <span class="s2">"us-east-1"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
        </span>aws s3api create-bucket <span class="se">\</span>
          <span class="nt">--bucket</span> <span class="nv">$BUCKET_NAME</span> <span class="se">\</span>
          <span class="nt">--region</span> <span class="nv">$REGION</span> <span class="se">\</span>
          <span class="nt">--create-bucket-configuration</span> <span class="nv">LocationConstraint</span><span class="o">=</span><span class="nv">$REGION</span>
    <span class="k">else
        </span>aws s3api create-bucket <span class="nt">--bucket</span> <span class="nv">$BUCKET_NAME</span> <span class="nt">--region</span> <span class="nv">$REGION</span>
    <span class="k">fi</span>
    
    <span class="c"># í¼ë¸”ë¦­ ì•¡ì„¸ìŠ¤ ì°¨ë‹¨ (ê¸°ë³¸ ë³´ì•ˆ)</span>
    aws s3api put-public-access-block <span class="se">\</span>
      <span class="nt">--bucket</span> <span class="nv">$BUCKET_NAME</span> <span class="se">\</span>
      <span class="nt">--public-access-block-configuration</span> <span class="se">\</span>
        <span class="s2">"BlockPublicAcls=true,IgnorePublicAcls=true,BlockPublicPolicy=true,RestrictPublicBuckets=true"</span>
    
    <span class="nb">echo</span> <span class="s2">"S3 ë²„í‚· ìƒì„± ì™„ë£Œ: </span><span class="nv">$BUCKET_NAME</span><span class="s2">"</span>
<span class="o">}</span>

<span class="c"># ë²„í‚· ì •ì±… ì„¤ì •</span>
setup_bucket_policy<span class="o">()</span> <span class="o">{</span>
    <span class="nb">cat</span> <span class="o">&gt;</span> bucket-policy.json <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh">
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "DenyInsecureConnections",
            "Effect": "Deny",
            "Principal": "*",
            "Action": "s3:*",
            "Resource": [
                "arn:aws:s3:::</span><span class="nv">$BUCKET_NAME</span><span class="sh">",
                "arn:aws:s3:::</span><span class="nv">$BUCKET_NAME</span><span class="sh">/*"
            ],
            "Condition": {
                "Bool": {
                    "aws:SecureTransport": "false"
                }
            }
        },
        {
            "Sid": "AllowSpecificIPAccess",
            "Effect": "Allow",
            "Principal": "*",
            "Action": "s3:GetObject",
            "Resource": "arn:aws:s3:::</span><span class="nv">$BUCKET_NAME</span><span class="sh">/*",
            "Condition": {
                "IpAddress": {
                    "aws:SourceIp": [
                        "203.0.113.0/24",
                        "198.51.100.0/24"
                    ]
                }
            }
        }
    ]
}
</span><span class="no">EOF

</span>    aws s3api put-bucket-policy <span class="nt">--bucket</span> <span class="nv">$BUCKET_NAME</span> <span class="nt">--policy</span> file://bucket-policy.json
    <span class="nb">echo</span> <span class="s2">"ë²„í‚· ì •ì±… ì ìš© ì™„ë£Œ"</span>
<span class="o">}</span>

<span class="c"># ìˆ˜ëª… ì£¼ê¸° ì •ì±… ì„¤ì •</span>
setup_lifecycle_policy<span class="o">()</span> <span class="o">{</span>
    <span class="nb">cat</span> <span class="o">&gt;</span> lifecycle-policy.json <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh">
{
    "Rules": [
        {
            "ID": "TransitionToIA",
            "Status": "Enabled",
            "Filter": {
                "Prefix": "documents/"
            },
            "Transitions": [
                {
                    "Days": 30,
                    "StorageClass": "STANDARD_IA"
                },
                {
                    "Days": 90,
                    "StorageClass": "GLACIER"
                },
                {
                    "Days": 365,
                    "StorageClass": "DEEP_ARCHIVE"
                }
            ]
        },
        {
            "ID": "DeleteIncompleteMultipartUploads",
            "Status": "Enabled",
            "Filter": {},
            "AbortIncompleteMultipartUpload": {
                "DaysAfterInitiation": 7
            }
        },
        {
            "ID": "DeleteOldVersions",
            "Status": "Enabled",
            "Filter": {},
            "NoncurrentVersionTransitions": [
                {
                    "NoncurrentDays": 30,
                    "StorageClass": "GLACIER"
                }
            ],
            "NoncurrentVersionExpiration": {
                "NoncurrentDays": 365
            }
        }
    ]
}
</span><span class="no">EOF

</span>    aws s3api put-bucket-lifecycle-configuration <span class="se">\</span>
      <span class="nt">--bucket</span> <span class="nv">$BUCKET_NAME</span> <span class="se">\</span>
      <span class="nt">--lifecycle-configuration</span> file://lifecycle-policy.json
    
    <span class="nb">echo</span> <span class="s2">"ìˆ˜ëª… ì£¼ê¸° ì •ì±… ì ìš© ì™„ë£Œ"</span>
<span class="o">}</span>

<span class="c"># ë²„ì „ ê´€ë¦¬ í™œì„±í™”</span>
enable_versioning<span class="o">()</span> <span class="o">{</span>
    aws s3api put-bucket-versioning <span class="se">\</span>
      <span class="nt">--bucket</span> <span class="nv">$BUCKET_NAME</span> <span class="se">\</span>
      <span class="nt">--versioning-configuration</span> <span class="nv">Status</span><span class="o">=</span>Enabled
    
    <span class="nb">echo</span> <span class="s2">"ë²„ì „ ê´€ë¦¬ í™œì„±í™” ì™„ë£Œ"</span>
<span class="o">}</span>

<span class="c"># ì„œë²„ ì¸¡ ì•”í˜¸í™” ì„¤ì •</span>
setup_encryption<span class="o">()</span> <span class="o">{</span>
    <span class="nb">cat</span> <span class="o">&gt;</span> encryption-config.json <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh">
{
    "Rules": [
        {
            "ApplyServerSideEncryptionByDefault": {
                "SSEAlgorithm": "AES256"
            },
            "BucketKeyEnabled": true
        }
    ]
}
</span><span class="no">EOF

</span>    aws s3api put-bucket-encryption <span class="se">\</span>
      <span class="nt">--bucket</span> <span class="nv">$BUCKET_NAME</span> <span class="se">\</span>
      <span class="nt">--server-side-encryption-configuration</span> file://encryption-config.json
    
    <span class="nb">echo</span> <span class="s2">"ì„œë²„ ì¸¡ ì•”í˜¸í™” ì„¤ì • ì™„ë£Œ"</span>
<span class="o">}</span>

<span class="c"># ë¡œê¹… ì„¤ì •</span>
setup_logging<span class="o">()</span> <span class="o">{</span>
    <span class="c"># ì•¡ì„¸ìŠ¤ ë¡œê·¸ë¥¼ ì €ì¥í•  ë²„í‚· (ê¸°ì¡´ ë²„í‚·ì´ë‚˜ ë³„ë„ ë¡œê·¸ ë²„í‚· ì‚¬ìš©)</span>
    <span class="nv">LOG_BUCKET</span><span class="o">=</span><span class="s2">"</span><span class="nv">$BUCKET_NAME</span><span class="s2">-logs"</span>
    
    aws s3api create-bucket <span class="nt">--bucket</span> <span class="nv">$LOG_BUCKET</span> <span class="nt">--region</span> <span class="nv">$REGION</span>
    
    <span class="nb">cat</span> <span class="o">&gt;</span> logging-config.json <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh">
{
    "LoggingEnabled": {
        "TargetBucket": "</span><span class="nv">$LOG_BUCKET</span><span class="sh">",
        "TargetPrefix": "access-logs/"
    }
}
</span><span class="no">EOF

</span>    aws s3api put-bucket-logging <span class="se">\</span>
      <span class="nt">--bucket</span> <span class="nv">$BUCKET_NAME</span> <span class="se">\</span>
      <span class="nt">--bucket-logging-status</span> file://logging-config.json
    
    <span class="nb">echo</span> <span class="s2">"ì•¡ì„¸ìŠ¤ ë¡œê¹… ì„¤ì • ì™„ë£Œ"</span>
<span class="o">}</span>

<span class="c"># CloudFront ë°°í¬ ìƒì„± (S3ì™€ ì—°ë™)</span>
create_cloudfront_distribution<span class="o">()</span> <span class="o">{</span>
    <span class="nb">cat</span> <span class="o">&gt;</span> cloudfront-config.json <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh">
{
    "CallerReference": "</span><span class="si">$(</span><span class="nb">date</span> +%s<span class="si">)</span><span class="sh">",
    "Comment": "CloudFront distribution for S3 bucket",
    "DefaultRootObject": "index.html",
    "Origins": {
        "Quantity": 1,
        "Items": [
            {
                "Id": "S3-</span><span class="nv">$BUCKET_NAME</span><span class="sh">",
                "DomainName": "</span><span class="nv">$BUCKET_NAME</span><span class="sh">.s3.amazonaws.com",
                "S3OriginConfig": {
                    "OriginAccessIdentity": ""
                }
            }
        ]
    },
    "DefaultCacheBehavior": {
        "TargetOriginId": "S3-</span><span class="nv">$BUCKET_NAME</span><span class="sh">",
        "ViewerProtocolPolicy": "redirect-to-https",
        "MinTTL": 0,
        "ForwardedValues": {
            "QueryString": false,
            "Cookies": {
                "Forward": "none"
            }
        }
    },
    "Enabled": true,
    "PriceClass": "PriceClass_100"
}
</span><span class="no">EOF

</span>    <span class="nv">DISTRIBUTION_ID</span><span class="o">=</span><span class="si">$(</span>aws cloudfront create-distribution <span class="se">\</span>
      <span class="nt">--distribution-config</span> file://cloudfront-config.json <span class="se">\</span>
      <span class="nt">--query</span> <span class="s1">'Distribution.Id'</span> <span class="se">\</span>
      <span class="nt">--output</span> text<span class="si">)</span>
    
    <span class="nb">echo</span> <span class="s2">"CloudFront ë°°í¬ ìƒì„± ì™„ë£Œ: </span><span class="nv">$DISTRIBUTION_ID</span><span class="s2">"</span>
<span class="o">}</span>

<span class="c"># S3 ë™ê¸°í™” ë° ì—…ë¡œë“œ ìŠ¤í¬ë¦½íŠ¸</span>
sync_content<span class="o">()</span> <span class="o">{</span>
    <span class="nb">local </span><span class="nv">source_dir</span><span class="o">=</span><span class="nv">$1</span>
    <span class="nb">local </span><span class="nv">target_prefix</span><span class="o">=</span><span class="nv">$2</span>
    
    <span class="nb">echo</span> <span class="s2">"ì»¨í…ì¸  ë™ê¸°í™” ì¤‘: </span><span class="nv">$source_dir</span><span class="s2"> -&gt; s3://</span><span class="nv">$BUCKET_NAME</span><span class="s2">/</span><span class="nv">$target_prefix</span><span class="s2">"</span>
    
    aws s3 <span class="nb">sync</span> <span class="s2">"</span><span class="nv">$source_dir</span><span class="s2">"</span> <span class="s2">"s3://</span><span class="nv">$BUCKET_NAME</span><span class="s2">/</span><span class="nv">$target_prefix</span><span class="s2">"</span> <span class="se">\</span>
      <span class="nt">--delete</span> <span class="se">\</span>
      <span class="nt">--exact-timestamps</span> <span class="se">\</span>
      <span class="nt">--exclude</span> <span class="s2">"*.tmp"</span> <span class="se">\</span>
      <span class="nt">--exclude</span> <span class="s2">".DS_Store"</span> <span class="se">\</span>
      <span class="nt">--exclude</span> <span class="s2">"Thumbs.db"</span>
    
    <span class="nb">echo</span> <span class="s2">"ë™ê¸°í™” ì™„ë£Œ"</span>
<span class="o">}</span>

<span class="c"># ë©”ì¸ ì‹¤í–‰ í•¨ìˆ˜</span>
main<span class="o">()</span> <span class="o">{</span>
    create_s3_bucket
    setup_bucket_policy
    setup_lifecycle_policy
    enable_versioning
    setup_encryption
    setup_logging
    
    <span class="nb">echo</span> <span class="s2">"=== S3 ë²„í‚· ì„¤ì • ì™„ë£Œ ==="</span>
    <span class="nb">echo</span> <span class="s2">"ë²„í‚· ì´ë¦„: </span><span class="nv">$BUCKET_NAME</span><span class="s2">"</span>
    <span class="nb">echo</span> <span class="s2">"ë¦¬ì „: </span><span class="nv">$REGION</span><span class="s2">"</span>
    <span class="nb">echo</span> <span class="s2">"ê¸°ëŠ¥: ë²„ì „ ê´€ë¦¬, ì•”í˜¸í™”, ìˆ˜ëª… ì£¼ê¸° ì •ì±…, ì•¡ì„¸ìŠ¤ ë¡œê¹…"</span>
<span class="o">}</span>

<span class="c"># ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰</span>
main
</code></pre></div></div>

<h2 id="rds-ë°ì´í„°ë² ì´ìŠ¤-êµ¬ì¶•-ë°-ìš´ì˜--rds-database-setup--operations">RDS ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¶• ë° ìš´ì˜ | RDS Database Setup &amp; Operations</h2>

<h3 id="ï¸-rds-ì™„ì „-ë§ˆìŠ¤í„°">ğŸ—ƒï¸ RDS ì™„ì „ ë§ˆìŠ¤í„°</h3>

<h4 id="rds-ì¸ìŠ¤í„´ìŠ¤-ìƒì„±-ë°-ê´€ë¦¬">RDS ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ë° ê´€ë¦¬</h4>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c"># RDS ì¢…í•© ê´€ë¦¬ ìŠ¤í¬ë¦½íŠ¸</span>

<span class="nv">DB_INSTANCE_IDENTIFIER</span><span class="o">=</span><span class="s2">"production-mysql-db"</span>
<span class="nv">DB_NAME</span><span class="o">=</span><span class="s2">"productiondb"</span>
<span class="nv">MASTER_USERNAME</span><span class="o">=</span><span class="s2">"admin"</span>
<span class="nv">MASTER_PASSWORD</span><span class="o">=</span><span class="s2">"MySecurePassword123!"</span>
<span class="nv">DB_INSTANCE_CLASS</span><span class="o">=</span><span class="s2">"db.t3.micro"</span>
<span class="nv">ENGINE</span><span class="o">=</span><span class="s2">"mysql"</span>
<span class="nv">ENGINE_VERSION</span><span class="o">=</span><span class="s2">"8.0.35"</span>
<span class="nv">ALLOCATED_STORAGE</span><span class="o">=</span>20
<span class="nv">VPC_SECURITY_GROUP_ID</span><span class="o">=</span><span class="s2">"sg-xxxxxxxxx"</span>  <span class="c"># ì´ì „ì— ìƒì„±í•œ DB ë³´ì•ˆ ê·¸ë£¹ ID</span>

<span class="c"># DB ì„œë¸Œë„· ê·¸ë£¹ ìƒì„±</span>
create_db_subnet_group<span class="o">()</span> <span class="o">{</span>
    aws rds create-db-subnet-group <span class="se">\</span>
      <span class="nt">--db-subnet-group-name</span> production-db-subnet-group <span class="se">\</span>
      <span class="nt">--db-subnet-group-description</span> <span class="s2">"Subnet group for production database"</span> <span class="se">\</span>
      <span class="nt">--subnet-ids</span> subnet-xxxxxxxxx subnet-yyyyyyyyy <span class="se">\</span>
      <span class="nt">--tags</span> <span class="nv">Key</span><span class="o">=</span>Name,Value<span class="o">=</span>Production-DB-Subnet-Group
    
    <span class="nb">echo</span> <span class="s2">"DB ì„œë¸Œë„· ê·¸ë£¹ ìƒì„± ì™„ë£Œ"</span>
<span class="o">}</span>

<span class="c"># RDS ì¸ìŠ¤í„´ìŠ¤ ìƒì„±</span>
create_rds_instance<span class="o">()</span> <span class="o">{</span>
    <span class="nb">echo</span> <span class="s2">"RDS ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì¤‘..."</span>
    
    aws rds create-db-instance <span class="se">\</span>
      <span class="nt">--db-instance-identifier</span> <span class="nv">$DB_INSTANCE_IDENTIFIER</span> <span class="se">\</span>
      <span class="nt">--db-instance-class</span> <span class="nv">$DB_INSTANCE_CLASS</span> <span class="se">\</span>
      <span class="nt">--engine</span> <span class="nv">$ENGINE</span> <span class="se">\</span>
      <span class="nt">--engine-version</span> <span class="nv">$ENGINE_VERSION</span> <span class="se">\</span>
      <span class="nt">--master-username</span> <span class="nv">$MASTER_USERNAME</span> <span class="se">\</span>
      <span class="nt">--master-user-password</span> <span class="nv">$MASTER_PASSWORD</span> <span class="se">\</span>
      <span class="nt">--allocated-storage</span> <span class="nv">$ALLOCATED_STORAGE</span> <span class="se">\</span>
      <span class="nt">--db-name</span> <span class="nv">$DB_NAME</span> <span class="se">\</span>
      <span class="nt">--vpc-security-group-ids</span> <span class="nv">$VPC_SECURITY_GROUP_ID</span> <span class="se">\</span>
      <span class="nt">--db-subnet-group-name</span> production-db-subnet-group <span class="se">\</span>
      <span class="nt">--backup-retention-period</span> 7 <span class="se">\</span>
      <span class="nt">--backup-window</span> <span class="s2">"03:00-04:00"</span> <span class="se">\</span>
      <span class="nt">--maintenance-window</span> <span class="s2">"sun:04:00-sun:05:00"</span> <span class="se">\</span>
      <span class="nt">--multi-az</span> <span class="se">\</span>
      <span class="nt">--storage-type</span> gp2 <span class="se">\</span>
      <span class="nt">--storage-encrypted</span> <span class="se">\</span>
      <span class="nt">--monitoring-interval</span> 60 <span class="se">\</span>
      <span class="nt">--monitoring-role-arn</span> arn:aws:iam::123456789012:role/rds-monitoring-role <span class="se">\</span>
      <span class="nt">--enable-performance-insights</span> <span class="se">\</span>
      <span class="nt">--performance-insights-retention-period</span> 7 <span class="se">\</span>
      <span class="nt">--deletion-protection</span> <span class="se">\</span>
      <span class="nt">--tags</span> <span class="nv">Key</span><span class="o">=</span>Name,Value<span class="o">=</span>Production-MySQL-DB <span class="nv">Key</span><span class="o">=</span>Environment,Value<span class="o">=</span>Production
    
    <span class="nb">echo</span> <span class="s2">"RDS ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì¤‘... ì™„ë£Œê¹Œì§€ 10-15ë¶„ ì†Œìš”ë©ë‹ˆë‹¤."</span>
    
    <span class="c"># ì¸ìŠ¤í„´ìŠ¤ ì‚¬ìš© ê°€ëŠ¥ ëŒ€ê¸°</span>
    aws rds <span class="nb">wait </span>db-instance-available <span class="nt">--db-instance-identifier</span> <span class="nv">$DB_INSTANCE_IDENTIFIER</span>
    
    <span class="nb">echo</span> <span class="s2">"RDS ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì™„ë£Œ!"</span>
<span class="o">}</span>

<span class="c"># ì½ê¸° ì „ìš© ë³µì œë³¸ ìƒì„±</span>
create_read_replica<span class="o">()</span> <span class="o">{</span>
    <span class="nb">local </span><span class="nv">replica_identifier</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">DB_INSTANCE_IDENTIFIER</span><span class="k">}</span><span class="s2">-read-replica"</span>
    
    aws rds create-db-instance-read-replica <span class="se">\</span>
      <span class="nt">--db-instance-identifier</span> <span class="nv">$replica_identifier</span> <span class="se">\</span>
      <span class="nt">--source-db-instance-identifier</span> <span class="nv">$DB_INSTANCE_IDENTIFIER</span> <span class="se">\</span>
      <span class="nt">--db-instance-class</span> <span class="nv">$DB_INSTANCE_CLASS</span> <span class="se">\</span>
      <span class="nt">--publicly-accessible</span> <span class="se">\</span>
      <span class="nt">--multi-az</span> <span class="se">\</span>
      <span class="nt">--storage-encrypted</span> <span class="se">\</span>
      <span class="nt">--tags</span> <span class="nv">Key</span><span class="o">=</span>Name,Value<span class="o">=</span>Production-MySQL-DB-Replica <span class="nv">Key</span><span class="o">=</span>Environment,Value<span class="o">=</span>Production
    
    <span class="nb">echo</span> <span class="s2">"ì½ê¸° ì „ìš© ë³µì œë³¸ ìƒì„± ì¤‘: </span><span class="nv">$replica_identifier</span><span class="s2">"</span>
<span class="o">}</span>

<span class="c"># ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤ëƒ…ìƒ· ìƒì„±</span>
create_snapshot<span class="o">()</span> <span class="o">{</span>
    <span class="nb">local </span><span class="nv">snapshot_identifier</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">DB_INSTANCE_IDENTIFIER</span><span class="k">}</span><span class="s2">-snapshot-</span><span class="si">$(</span><span class="nb">date</span> +%Y%m%d-%H%M%S<span class="si">)</span><span class="s2">"</span>
    
    aws rds create-db-snapshot <span class="se">\</span>
      <span class="nt">--db-instance-identifier</span> <span class="nv">$DB_INSTANCE_IDENTIFIER</span> <span class="se">\</span>
      <span class="nt">--db-snapshot-identifier</span> <span class="nv">$snapshot_identifier</span> <span class="se">\</span>
      <span class="nt">--tags</span> <span class="nv">Key</span><span class="o">=</span>Name,Value<span class="o">=</span>Manual-Snapshot <span class="nv">Key</span><span class="o">=</span>CreatedBy,Value<span class="o">=</span>Script
    
    <span class="nb">echo</span> <span class="s2">"ìŠ¤ëƒ…ìƒ· ìƒì„± ì¤‘: </span><span class="nv">$snapshot_identifier</span><span class="s2">"</span>
<span class="o">}</span>

<span class="c"># ìë™ ë°±ì—… ì„¤ì • ìˆ˜ì •</span>
modify_backup_settings<span class="o">()</span> <span class="o">{</span>
    aws rds modify-db-instance <span class="se">\</span>
      <span class="nt">--db-instance-identifier</span> <span class="nv">$DB_INSTANCE_IDENTIFIER</span> <span class="se">\</span>
      <span class="nt">--backup-retention-period</span> 14 <span class="se">\</span>
      <span class="nt">--backup-window</span> <span class="s2">"02:00-03:00"</span> <span class="se">\</span>
      <span class="nt">--apply-immediately</span>
    
    <span class="nb">echo</span> <span class="s2">"ë°±ì—… ì„¤ì • ìˆ˜ì • ì™„ë£Œ (ë³´ì¡´ ê¸°ê°„: 14ì¼)"</span>
<span class="o">}</span>

<span class="c"># ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ë° ì´ˆê¸° ì„¤ì •</span>
setup_database<span class="o">()</span> <span class="o">{</span>
    <span class="c"># RDS ì—”ë“œí¬ì¸íŠ¸ ê°€ì ¸ì˜¤ê¸°</span>
    <span class="nv">DB_ENDPOINT</span><span class="o">=</span><span class="si">$(</span>aws rds describe-db-instances <span class="se">\</span>
      <span class="nt">--db-instance-identifier</span> <span class="nv">$DB_INSTANCE_IDENTIFIER</span> <span class="se">\</span>
      <span class="nt">--query</span> <span class="s1">'DBInstances[0].Endpoint.Address'</span> <span class="se">\</span>
      <span class="nt">--output</span> text<span class="si">)</span>
    
    <span class="nb">echo</span> <span class="s2">"ë°ì´í„°ë² ì´ìŠ¤ ì—”ë“œí¬ì¸íŠ¸: </span><span class="nv">$DB_ENDPOINT</span><span class="s2">"</span>
    
    <span class="c"># ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸° ì„¤ì • SQL ìŠ¤í¬ë¦½íŠ¸</span>
    <span class="nb">cat</span> <span class="o">&gt;</span> init-database.sql <span class="o">&lt;&lt;</span> <span class="sh">'</span><span class="no">EOF</span><span class="sh">'
-- ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸° ì„¤ì •
USE productiondb;

-- ì‚¬ìš©ì í…Œì´ë¸” ìƒì„±
CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX idx_username (username),
    INDEX idx_email (email)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- ì œí’ˆ í…Œì´ë¸” ìƒì„±
CREATE TABLE products (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    price DECIMAL(10,2) NOT NULL,
    stock_quantity INT DEFAULT 0,
    category_id INT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX idx_category (category_id),
    INDEX idx_price (price)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- ì£¼ë¬¸ í…Œì´ë¸” ìƒì„±
CREATE TABLE orders (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    total_amount DECIMAL(10,2) NOT NULL,
    status ENUM('pending', 'processing', 'shipped', 'delivered', 'cancelled') DEFAULT 'pending',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    INDEX idx_user_id (user_id),
    INDEX idx_status (status),
    INDEX idx_created_at (created_at)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- ì„±ëŠ¥ ìµœì í™” ì„¤ì •
SET GLOBAL innodb_buffer_pool_size = 1073741824; -- 1GB
SET GLOBAL query_cache_size = 67108864; -- 64MB
SET GLOBAL slow_query_log = 1;
SET GLOBAL long_query_time = 2;

-- ìƒ˜í”Œ ë°ì´í„° ì‚½ì…
INSERT INTO users (username, email, password_hash) VALUES
('admin', 'admin@example.com', SHA2('admin123', 256)),
('john_doe', 'john@example.com', SHA2('password123', 256)),
('jane_smith', 'jane@example.com', SHA2('password456', 256));

INSERT INTO products (name, description, price, stock_quantity, category_id) VALUES
('Laptop Pro', 'High-performance laptop for professionals', 1299.99, 50, 1),
('Wireless Mouse', 'Ergonomic wireless mouse', 29.99, 200, 2),
('USB-C Hub', 'Multi-port USB-C hub with HDMI output', 79.99, 100, 2);

INSERT INTO orders (user_id, total_amount, status) VALUES
(2, 1329.98, 'delivered'),
(3, 109.98, 'processing'),
(2, 29.99, 'shipped');
</span><span class="no">EOF
    
</span>    <span class="c"># MySQL í´ë¼ì´ì–¸íŠ¸ë¡œ ì´ˆê¸° ì„¤ì • ì‹¤í–‰ (ë¡œì»¬ì— mysql í´ë¼ì´ì–¸íŠ¸ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•¨)</span>
    <span class="c"># mysql -h $DB_ENDPOINT -u $MASTER_USERNAME -p$MASTER_PASSWORD &lt; init-database.sql</span>
    
    <span class="nb">echo</span> <span class="s2">"ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸° ì„¤ì • ìŠ¤í¬ë¦½íŠ¸ ìƒì„± ì™„ë£Œ: init-database.sql"</span>
    <span class="nb">echo</span> <span class="s2">"ë‹¤ìŒ ëª…ë ¹ìœ¼ë¡œ ì‹¤í–‰í•˜ì„¸ìš”: mysql -h </span><span class="nv">$DB_ENDPOINT</span><span class="s2"> -u </span><span class="nv">$MASTER_USERNAME</span><span class="s2"> -p &lt; init-database.sql"</span>
<span class="o">}</span>

<span class="c"># ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë‹ˆí„°ë§ ì„¤ì •</span>
setup_monitoring<span class="o">()</span> <span class="o">{</span>
    <span class="c"># CloudWatch ì•ŒëŒ ìƒì„±</span>
    aws cloudwatch put-metric-alarm <span class="se">\</span>
      <span class="nt">--alarm-name</span> <span class="s2">"RDS-CPU-Utilization-High"</span> <span class="se">\</span>
      <span class="nt">--alarm-description</span> <span class="s2">"RDS CPU utilization is too high"</span> <span class="se">\</span>
      <span class="nt">--metric-name</span> CPUUtilization <span class="se">\</span>
      <span class="nt">--namespace</span> AWS/RDS <span class="se">\</span>
      <span class="nt">--statistic</span> Average <span class="se">\</span>
      <span class="nt">--period</span> 300 <span class="se">\</span>
      <span class="nt">--threshold</span> 80 <span class="se">\</span>
      <span class="nt">--comparison-operator</span> GreaterThanThreshold <span class="se">\</span>
      <span class="nt">--evaluation-periods</span> 2 <span class="se">\</span>
      <span class="nt">--alarm-actions</span> arn:aws:sns:us-east-1:123456789012:rds-alerts <span class="se">\</span>
      <span class="nt">--dimensions</span> <span class="nv">Name</span><span class="o">=</span>DBInstanceIdentifier,Value<span class="o">=</span><span class="nv">$DB_INSTANCE_IDENTIFIER</span>
    
    aws cloudwatch put-metric-alarm <span class="se">\</span>
      <span class="nt">--alarm-name</span> <span class="s2">"RDS-FreeableMemory-Low"</span> <span class="se">\</span>
      <span class="nt">--alarm-description</span> <span class="s2">"RDS freeable memory is too low"</span> <span class="se">\</span>
      <span class="nt">--metric-name</span> FreeableMemory <span class="se">\</span>
      <span class="nt">--namespace</span> AWS/RDS <span class="se">\</span>
      <span class="nt">--statistic</span> Average <span class="se">\</span>
      <span class="nt">--period</span> 300 <span class="se">\</span>
      <span class="nt">--threshold</span> 104857600 <span class="se">\</span>
      <span class="nt">--comparison-operator</span> LessThanThreshold <span class="se">\</span>
      <span class="nt">--evaluation-periods</span> 2 <span class="se">\</span>
      <span class="nt">--alarm-actions</span> arn:aws:sns:us-east-1:123456789012:rds-alerts <span class="se">\</span>
      <span class="nt">--dimensions</span> <span class="nv">Name</span><span class="o">=</span>DBInstanceIdentifier,Value<span class="o">=</span><span class="nv">$DB_INSTANCE_IDENTIFIER</span>
    
    <span class="nb">echo</span> <span class="s2">"CloudWatch ì•ŒëŒ ì„¤ì • ì™„ë£Œ"</span>
<span class="o">}</span>

<span class="c"># ë©”ì¸ ì‹¤í–‰ í•¨ìˆ˜</span>
main<span class="o">()</span> <span class="o">{</span>
    <span class="nb">echo</span> <span class="s2">"=== RDS ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¶• ì‹œì‘ ==="</span>
    
    create_db_subnet_group
    create_rds_instance
    setup_database
    setup_monitoring
    
    <span class="nb">echo</span> <span class="s2">"=== RDS êµ¬ì¶• ì™„ë£Œ ==="</span>
    <span class="nb">echo</span> <span class="s2">"DB ì¸ìŠ¤í„´ìŠ¤: </span><span class="nv">$DB_INSTANCE_IDENTIFIER</span><span class="s2">"</span>
    <span class="nb">echo</span> <span class="s2">"ì—”ì§„: </span><span class="nv">$ENGINE</span><span class="s2"> </span><span class="nv">$ENGINE_VERSION</span><span class="s2">"</span>
    <span class="nb">echo</span> <span class="s2">"í´ë˜ìŠ¤: </span><span class="nv">$DB_INSTANCE_CLASS</span><span class="s2">"</span>
    <span class="nb">echo</span> <span class="s2">"ë‹¤ì¤‘ AZ: í™œì„±í™”"</span>
    <span class="nb">echo</span> <span class="s2">"ì•”í˜¸í™”: í™œì„±í™”"</span>
    <span class="nb">echo</span> <span class="s2">"ë°±ì—… ë³´ì¡´: 7ì¼"</span>
<span class="o">}</span>

<span class="c"># ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰</span>
main
</code></pre></div></div>

<h2 id="ë‹¤ìŒ-í¸-ì˜ˆê³ ">ë‹¤ìŒ í¸ ì˜ˆê³ </h2>

<p>ë‹¤ìŒ í¬ìŠ¤íŠ¸ì—ì„œëŠ” <strong>AWS ì„œë²„ë¦¬ìŠ¤ ì•„í‚¤í…ì²˜ì™€ Lambda ì™„ì „ ë§ˆìŠ¤í„°</strong>ë¥¼ ìƒì„¸íˆ ë‹¤ë£° ì˜ˆì •ì…ë‹ˆë‹¤:</p>
<ul>
  <li>Lambda í•¨ìˆ˜ ê°œë°œë¶€í„° ê³ ê¸‰ íŒ¨í„´ê¹Œì§€</li>
  <li>API Gatewayì™€ ì™„ì „ í†µí•©</li>
  <li>DynamoDB NoSQL ë°ì´í„°ë² ì´ìŠ¤</li>
  <li>CloudFormation ì¸í”„ë¼ ìë™í™”</li>
</ul>

<p>AWS í•µì‹¬ ì„œë¹„ìŠ¤ë“¤ì„ ì™„ì „íˆ ë§ˆìŠ¤í„°í•˜ì…¨ë‚˜ìš”? ğŸš€â˜ï¸</p>

  </div>

  <footer class="post-footer">
    <div class="post-navigation"><div class="nav-previous">
        <a href="/infra-blog/blog/2024/03/23/aws-fundamentals-architecture-patterns.html" rel="prev">
          <i class="icon-left-arrow"></i>
          <span class="nav-title">AWS ì™„ì „ ì •ë³µ ê°€ì´ë“œ 1í¸ - ê¸°ì´ˆë¶€í„° ì•„í‚¤í…ì²˜ íŒ¨í„´ê¹Œì§€ | AWS Complet...</span>
        </a>
      </div><div class="nav-next">
        <a href="/infra-blog/blog/2024/03/25/aws-serverless-lambda-apigateway.html" rel="next">
          <span class="nav-title">AWS ì™„ì „ ì •ë³µ ê°€ì´ë“œ 3í¸ - ì„œë²„ë¦¬ìŠ¤ ì•„í‚¤í…ì²˜ì™€ Lambda ë§ˆìŠ¤í„° | AWS ...</span>
          <i class="icon-right-arrow"></i>
        </a>
      </div></div>
  </footer>
  </article></div>

    </section>
    <footer class="condensed">
      <ul class="social about-footer condensed"><a href="https://github.com/leeyonghe" target="_blank">
          <li>
            <i class="icon-github-circled"></i>
          </li>
        </a><a href="https://www.linkedin.com/in/lee-yong-hee-18912454/" target="_blank">
          <li>
            <i class="icon-linkedin-squared"></i>
          </li>
        </a><!----></ul><p class="about-footer condensed">&copy;
        2025</p><div class="about-footer condensed">
        <p>Dark Mode
          <i class="icon-moon"></i>
          <label class="switch">
            <input type="checkbox" class="dark-mode-toggle">
            <span class="slider round" onclick="toggleDarkMode()"></span>
          </label>
        </p>
      </div>
    </footer>
  </main>
  
  <script type="text/javascript" src="/infra-blog/assets/js/darkmode.js"></script>
  
  <script src="/infra-blog/assets/js/simple-jekyll-search.min.js"></script>
  <script src="/infra-blog/assets/js/search.js"></script>
  
</body>

</html>
